(()=>{var t={n:s=>{var e=s&&s.__esModule?()=>s.default:()=>s;return t.d(e,{a:e}),e},d:(s,e)=>{for(var r in e)t.o(e,r)&&!t.o(s,r)&&Object.defineProperty(s,r,{enumerable:!0,get:e[r]})},o:(t,s)=>Object.prototype.hasOwnProperty.call(t,s),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},s={};(()=>{"use strict";t.r(s);const e=flarum.core.compat["admin/app"];var r=t.n(e);const o=flarum.core.compat["extensions/afrux-forum-widgets-core/common/extend/Widgets"];var i=t.n(o);function n(t,s){return n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,s){return t.__proto__=s,t},n(t,s)}const a=flarum.core.compat["forum/app"];var u=t.n(a);const c=flarum.core.compat["common/helpers/username"];var l=t.n(c);const f=flarum.core.compat["common/utils/formatNumber"];var d=t.n(f);const p=flarum.core.compat["common/components/Link"];var g=t.n(p);const b=flarum.core.compat["common/components/LoadingIndicator"];var w=t.n(b);const _=flarum.core.compat["common/utils/ItemList"];var v=t.n(_);const h=flarum.core.compat["extensions/afrux-forum-widgets-core/common/components/Widget"];var y="fof-forum-statistics-widget.forum.navbar.",S="fof-forum-statistics-widget.",O=function(t){var s,e;function r(){return t.apply(this,arguments)||this}e=t,(s=r).prototype=Object.create(e.prototype),s.prototype.constructor=s,n(s,e);var o=r.prototype;return o.oninit=function(s){var e=this;t.prototype.oninit.call(this,s);var r=u().forum.attribute(S+"lastUserId");r&&(this.loading=!0,u().store.find("users",r).then((function(t){e.user=t,e.loading=!1,m.redraw()})))},o.className=function(){return"Fof-ForumStatisticsWidget"},o.icon=function(){return"fas fa-chart-bar"},o.title=function(){return u().translator.trans(y+"widget_title")},o.content=function(){if(this.loading)return m(w(),null);var t=this.items().toArray();return 0!==t.length?m("div",{class:"ForumStatistics containerNarrow"},m("div",{class:"row"},m("ul",{id:"ForumStatisticsList"},t))):void 0},o.items=function(){var t=new(v()),s=u().forum.attribute(S+"discussionsCount"),e=u().forum.attribute(S+"postsCount"),r=u().forum.attribute(S+"usersCount"),o=u().forum.attribute(S+"lastUserId");return s&&t.add("discussions_count",m("li",null,u().translator.trans(y+"discussions_count",{discussionsCount:d()(s)}))),e&&t.add("posts_count",m("li",null,u().translator.trans(y+"posts_count",{postsCount:d()(e)}))),r&&t.add("users_count",m("li",null,u().translator.trans(y+"users_count",{usersCount:d()(r)}))),o&&t.add("latest_member",m("li",null,u().translator.trans(y+"latest_member")," ",m(g(),{href:u().route.user(this.user)},m("strong",null,l()(this.user))))),t},r}(t.n(h)()),P="fof-forum-statistics-widget.admin.";r().initializers.add("fof-forum-statistics-widget",(function(){var t;t=r(),(new(i())).add({key:"FofForumStatistic",component:O,isDisabled:!1,isUnique:!0,placement:"end",position:1}).extend(t,"fof-forum-statistics-widget"),r().extensionData.for("fof-forum-statistics-widget").registerSetting({label:r().translator.trans(P+"settings.widget_ignore_private_discussions_label"),setting:"fof-forum-statistics-widget.ignore_private_discussions",type:"switch"}).registerSetting({label:r().translator.trans(P+"settings.widget_order_label"),setting:"fof-forum-statistics-widget.widget_order",type:"number",help:r().translator.trans(P+"settings.widget_helper_text")}).registerSetting({setting:"fof-forum-statistics-widget.cache_duration",type:"number",min:0,label:r().translator.trans("fof-forum-statistics-widget.admin.settings.cache_duration_label"),help:r().translator.trans("fof-forum-statistics-widget.admin.settings.cache_duration_help")}).registerPermission({icon:"fas fa-chart-bar",label:r().translator.trans(P+"permissions.view_discussions_count_label"),permission:"fof-forum-statistics-widget.viewWidget.discussionsCount",allowGuest:!0},"view").registerPermission({icon:"fas fa-chart-bar",label:r().translator.trans(P+"permissions.view_posts_count_label"),permission:"fof-forum-statistics-widget.viewWidget.postsCount",allowGuest:!0},"view").registerPermission({icon:"fas fa-chart-bar",label:r().translator.trans(P+"permissions.view_users_count_label"),permission:"fof-forum-statistics-widget.viewWidget.usersCount",allowGuest:!0},"view").registerPermission({icon:"fas fa-chart-bar",label:r().translator.trans(P+"permissions.view_lastest_member_label"),permission:"fof-forum-statistics-widget.viewWidget.latestMember",allowGuest:!0},"view")}))})(),module.exports=s})();
//# sourceMappingURL=admin.js.map