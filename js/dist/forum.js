(()=>{var t={n:o=>{var r=o&&o.__esModule?()=>o.default:()=>o;return t.d(r,{a:r}),r},d:(o,r)=>{for(var n in r)t.o(r,n)&&!t.o(o,n)&&Object.defineProperty(o,n,{enumerable:!0,get:r[n]})},o:(t,o)=>Object.prototype.hasOwnProperty.call(t,o),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},o={};(()=>{"use strict";t.r(o);const r=flarum.core.compat["forum/app"];var n=t.n(r);const e=flarum.core.compat["extensions/afrux-forum-widgets-core/common/extend/Widgets"];var s=t.n(e);function a(t,o){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,o){return t.__proto__=o,t},a(t,o)}const i=flarum.core.compat["common/helpers/username"];var u=t.n(i);const c=flarum.core.compat["common/utils/formatNumber"];var l=t.n(c);const f=flarum.core.compat["common/components/Link"];var d=t.n(f);const p=flarum.core.compat["common/components/LoadingIndicator"];var v=t.n(p);const b=flarum.core.compat["common/utils/ItemList"];var g=t.n(b);const y=flarum.core.compat["extensions/afrux-forum-widgets-core/common/components/Widget"];var _="fof-forum-statistics-widget.forum.navbar.",h="fof-forum-statistics-widget.",w=function(t){var o,r;function e(){return t.apply(this,arguments)||this}r=t,(o=e).prototype=Object.create(r.prototype),o.prototype.constructor=o,a(o,r);var s=e.prototype;return s.oninit=function(o){var r=this;t.prototype.oninit.call(this,o);var e=n().forum.attribute(h+"lastUserId");e&&(this.loading=!0,n().store.find("users",e).then((function(t){r.user=t,r.loading=!1,m.redraw()})))},s.className=function(){return"Fof-ForumStatisticsWidget"},s.icon=function(){return"fas fa-chart-bar"},s.title=function(){return n().translator.trans(_+"widget_title")},s.content=function(){if(this.loading)return m(v(),null);var t=this.items().toArray();return 0!==t.length?m("div",{class:"ForumStatistics containerNarrow"},m("div",{class:"row"},m("ul",{id:"ForumStatisticsList"},t))):void 0},s.items=function(){var t=new(g()),o=n().forum.attribute(h+"discussionsCount"),r=n().forum.attribute(h+"postsCount"),e=n().forum.attribute(h+"usersCount"),s=n().forum.attribute(h+"lastUserId");return o&&t.add("discussions_count",m("li",null,n().translator.trans(_+"discussions_count",{discussionsCount:l()(o)}))),r&&t.add("posts_count",m("li",null,n().translator.trans(_+"posts_count",{postsCount:l()(r)}))),e&&t.add("users_count",m("li",null,n().translator.trans(_+"users_count",{usersCount:l()(e)}))),s&&t.add("latest_member",m("li",null,n().translator.trans(_+"latest_member")," ",m(d(),{href:n().route.user(this.user)},m("strong",null,u()(this.user))))),t},e}(t.n(y)());n().initializers.add("fof/forum-statistics-widget",(function(){var t;t=n(),(new(s())).add({key:"FofForumStatistic",component:w,isDisabled:!1,isUnique:!0,placement:"end",position:1}).extend(t,"fof-forum-statistics-widget")}))})(),module.exports=o})();
//# sourceMappingURL=forum.js.map