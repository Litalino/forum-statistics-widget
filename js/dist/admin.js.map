{"version":3,"file":"admin.js","mappings":"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","sources":["webpack://@fof/forum-statistics-widget/webpack/bootstrap","webpack://@fof/forum-statistics-widget/webpack/runtime/compat get default export","webpack://@fof/forum-statistics-widget/webpack/runtime/define property getters","webpack://@fof/forum-statistics-widget/webpack/runtime/hasOwnProperty shorthand","webpack://@fof/forum-statistics-widget/webpack/runtime/make namespace object","webpack://@fof/forum-statistics-widget/external root \"flarum.core.compat['admin/app']\"","webpack://@fof/forum-statistics-widget/external root \"flarum.core.compat['extensions/afrux-forum-widgets-core/common/extend/Widgets']\"","webpack://@fof/forum-statistics-widget/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@fof/forum-statistics-widget/external root \"flarum.core.compat['forum/app']\"","webpack://@fof/forum-statistics-widget/external root \"flarum.core.compat['common/helpers/username']\"","webpack://@fof/forum-statistics-widget/external root \"flarum.core.compat['common/utils/formatNumber']\"","webpack://@fof/forum-statistics-widget/external root \"flarum.core.compat['common/components/Link']\"","webpack://@fof/forum-statistics-widget/external root \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://@fof/forum-statistics-widget/external root \"flarum.core.compat['common/utils/ItemList']\"","webpack://@fof/forum-statistics-widget/external root \"flarum.core.compat['extensions/afrux-forum-widgets-core/common/components/Widget']\"","webpack://@fof/forum-statistics-widget/./src/common/components/ForumStatisticsWidget.js","webpack://@fof/forum-statistics-widget/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@fof/forum-statistics-widget/./src/admin/index.ts","webpack://@fof/forum-statistics-widget/./src/common/registerWidget.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['extensions/afrux-forum-widgets-core/common/extend/Widgets'];","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/username'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/formatNumber'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Link'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LoadingIndicator'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/ItemList'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['extensions/afrux-forum-widgets-core/common/components/Widget'];","import app from 'flarum/forum/app';\n//import Component from 'flarum/common/Component';\nimport username from 'flarum/common/helpers/username';\nimport formatNumber from 'flarum/common/utils/formatNumber';\nimport Link from 'flarum/common/components/Link';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport ItemList from 'flarum/common/utils/ItemList';\n\nimport Widget from 'flarum/extensions/afrux-forum-widgets-core/common/components/Widget';\n\nconst translationPrefix = 'fof-forum-statistics-widget.forum.navbar.';\nconst attributePrefix = 'fof-forum-statistics-widget.';\n\nexport default class ForumStatisticsWidget extends Widget {\n  oninit(vnode) {\n    super.oninit(vnode);\n    const lastUserId = app.forum.attribute(attributePrefix + 'lastUserId');\n\n    if (lastUserId) {\n      this.loading = true;\n\n      app.store.find('users', lastUserId).then((user) => {\n        this.user = user;\n        this.loading = false;\n        m.redraw();\n      });\n    }\n  }\n\n  className() {\n    // css class for the container\n    return 'Fof-ForumStatisticsWidget';\n  }\n\n  icon() {\n      // Widget icon.\n      return 'fas fa-chart-bar';\n  }\n\n  title() {\n      // Widget title.\n      return app.translator.trans(translationPrefix + 'widget_title');\n  }\n\n  /*\n  <div class=\"ForumStatistics containerNarrow\">\n        <div class=\"row\">\n          <h2>\n            <i class=\"fas fa-chart-bar\"></i> {app.translator.trans(translationPrefix + 'widget_title')}\n          </h2>\n          <div>\n            <ul id=\"ForumStatisticsList\">{items}</ul>\n          </div>\n        </div>\n      </div>\n      */\n  \n  content() {\n    if (this.loading) {\n      return <LoadingIndicator />;\n    }\n\n    const items = this.items().toArray();\n\n    if (items.length === 0) return;\n\n    return (\n      <div class=\"ForumStatistics containerNarrow\">\n        <div class=\"row\">\n            <ul id=\"ForumStatisticsList\">{items}</ul>\n        </div>\n      </div>\n    );\n  }\n\n  items() {\n    const items = new ItemList();\n\n    let discussionsCount = app.forum.attribute(attributePrefix + 'discussionsCount');\n    let postsCount = app.forum.attribute(attributePrefix + 'postsCount');\n    let usersCount = app.forum.attribute(attributePrefix + 'usersCount');\n    const lastUserId = app.forum.attribute(attributePrefix + 'lastUserId');\n\n    if (discussionsCount) {\n      items.add(\n        'discussions_count',\n        <li>\n          {app.translator.trans(translationPrefix + 'discussions_count', {\n            discussionsCount: formatNumber(discussionsCount),\n          })}\n        </li>\n      );\n    }\n\n    if (postsCount) {\n      items.add(\n        'posts_count',\n        <li>\n          {app.translator.trans(translationPrefix + 'posts_count', {\n            postsCount: formatNumber(postsCount),\n          })}\n        </li>\n      );\n    }\n\n    if (usersCount) {\n      items.add(\n        'users_count',\n        <li>\n          {app.translator.trans(translationPrefix + 'users_count', {\n            usersCount: formatNumber(usersCount),\n          })}\n        </li>\n      );\n    }\n\n    if (lastUserId) {\n      items.add(\n        'latest_member',\n        <li>\n          {app.translator.trans(translationPrefix + 'latest_member')}{' '}\n          <Link href={app.route.user(this.user)}>\n            <strong>{username(this.user)}</strong>\n          </Link>\n        </li>\n      );\n    }\n\n    return items;\n  }\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","import app from 'flarum/admin/app';\nimport registerWidget from '../common/registerWidget';\n\nconst translationPrefix = 'fof-forum-statistics-widget.admin.';\n\napp.initializers.add('fof-forum-statistics-widget', () => {\n  registerWidget(app);\n  app.extensionData\n    .for('fof-forum-statistics-widget')\n    .registerSetting({\n      label: app.translator.trans(translationPrefix + 'settings.widget_ignore_private_discussions_label'),\n      setting: 'fof-forum-statistics-widget.ignore_private_discussions',\n      type: 'switch',\n    })\n    .registerSetting({\n      label: app.translator.trans(translationPrefix + 'settings.widget_order_label'),\n      setting: 'fof-forum-statistics-widget.widget_order',\n      type: 'number',\n      help: app.translator.trans(translationPrefix + 'settings.widget_helper_text'),\n    })\n    .registerSetting({\n      setting: 'fof-forum-statistics-widget.cache_duration',\n      type: 'number',\n      min: 0,\n      label: app.translator.trans('fof-forum-statistics-widget.admin.settings.cache_duration_label'),\n      help: app.translator.trans('fof-forum-statistics-widget.admin.settings.cache_duration_help'),\n    })\n    .registerPermission(\n      {\n        icon: 'fas fa-chart-bar',\n        label: app.translator.trans(translationPrefix + 'permissions.view_discussions_count_label'),\n        permission: 'fof-forum-statistics-widget.viewWidget.discussionsCount',\n        allowGuest: true,\n      },\n      'view'\n    )\n    .registerPermission(\n      {\n        icon: 'fas fa-chart-bar',\n        label: app.translator.trans(translationPrefix + 'permissions.view_posts_count_label'),\n        permission: 'fof-forum-statistics-widget.viewWidget.postsCount',\n        allowGuest: true,\n      },\n      'view'\n    )\n    .registerPermission(\n      {\n        icon: 'fas fa-chart-bar',\n        label: app.translator.trans(translationPrefix + 'permissions.view_users_count_label'),\n        permission: 'fof-forum-statistics-widget.viewWidget.usersCount',\n        allowGuest: true,\n      },\n      'view'\n    )\n    .registerPermission(\n      {\n        icon: 'fas fa-chart-bar',\n        label: app.translator.trans(translationPrefix + 'permissions.view_lastest_member_label'),\n        permission: 'fof-forum-statistics-widget.viewWidget.latestMember',\n        allowGuest: true,\n      },\n      'view'\n    );\n});","import Widgets from 'flarum/extensions/afrux-forum-widgets-core/common/extend/Widgets';\n\nimport ForumStatisticsWidget from './components/ForumStatisticsWidget';\n\nexport default function (app) {\n  new Widgets()\n    .add({\n      key: 'FofForumStatistic',\n      component: ForumStatisticsWidget,\n      isDisabled: false,\n      isUnique: true,\n      placement: 'end',\n      position: 1,\n    })\n    .extend(app, 'fof-forum-statistics-widget');\n}"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","core","compat","_setPrototypeOf","p","setPrototypeOf","bind","__proto__","translationPrefix","attributePrefix","ForumStatisticsWidget","_Widget","subClass","superClass","apply","arguments","create","constructor","_proto","oninit","vnode","_this","lastUserId","app","attribute","this","loading","find","then","user","m","redraw","className","icon","title","trans","content","LoadingIndicator","items","toArray","length","class","id","ItemList","discussionsCount","postsCount","usersCount","add","formatNumber","Link","href","username","Widget","Widgets","component","isDisabled","isUnique","placement","position","extend","registerSetting","label","setting","type","help","min","registerPermission","permission","allowGuest"],"sourceRoot":""}